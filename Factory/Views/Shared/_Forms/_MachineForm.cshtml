@{
  string isChecked = "";
}
@model Factory.Models.Machine

@Html.LabelFor(e => e.ModelName)
@Html.TextBoxFor(e => e.ModelName)
@Html.ValidationMessageFor(e => e.ModelName)

<h5>Engineers</h5>
@if (ViewBag.Engineers.Count == 0)
{
  <p>No engineers currently available</p>
}
else
{
  <ul>
  @for (int i = 0; i < ViewBag.Engineers.Count; i++)
  {
    @if (ViewBag.AuthorizedEngineers != null)
    {
      isChecked = (ViewBag.AuthorizedEngineers.Contains(@ViewBag.Engineers[i].EngineerId)) ? "checked" : "";
    }

    <li>
      <input type="checkbox" id="@ViewBag.Engineers[i].EngineerId-id" name="EngineerId" value="@ViewBag.Engineers[i].EngineerId" @isChecked>
      <label for="@ViewBag.Engineers[i].EngineerId-id">@ViewBag.Engineers[i].Name</label><br />
    </li>
  }
  </ul>
}
