@{
  string isChecked = "";
}
@model Factory.Models.Engineer

@Html.LabelFor(e => e.FirstName)
@Html.TextBoxFor(e => e.FirstName)
@Html.ValidationMessageFor(e => e.FirstName)
@Html.LabelFor(e => e.LastName)
@Html.TextBoxFor(e => e.LastName)
@Html.ValidationMessageFor(e => e.LastName)

<h5>Machines</h5>
@if (ViewBag.Machines.Count == 0)
{
  <p>No machines currently available</p>
}
else
{
  @for (int i = 0; i < ViewBag.Machines.Count; i++)
  {
    @if (ViewBag.AuthorizedMachines != null)
    {
      isChecked = (ViewBag.AuthorizedMachines.Contains(@ViewBag.Machines[i].MachineId)) ? "checked" : "";
    }

    <input type="checkbox" name="MachineId" value="@ViewBag.Machines[i].MachineId" @isChecked>@ViewBag.Machines[i].ModelName<br />
  }
}
